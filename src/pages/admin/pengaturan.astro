---
import Layout from "~/layouts/admin-layout.astro";
import AdminSidebar from "../../components/Admin-site/admin-sidebar.astro";
import AdminTopbar from "../../components/Admin-site/admin-topbar.astro";
// Complex branding to show in admin UI
const complexName = 'Komplek Anggrek Asri';
const complexImage = 'https://images.unsplash.com/photo-1570129477492-45c003edd2be?w=100&h=100&fit=crop&crop=center';
---

<Layout>
  <AdminSidebar slot="sidebar" complexName={complexName} complexImage={complexImage} />
  <AdminTopbar slot="topbar" complexName={complexName} complexImage={complexImage} />

  <section class="header-card">
    <div class="header-left">
      <div class="icon"><i class="fas fa-cog"></i></div>
      <div>
        <h1>Pengaturan</h1>
        <p>Kelola email akun dan kata sandi.</p>
      </div>
    </div>
  </section>

  <section class="settings-grid">
    <div class="card">
      <div class="card-header">
        <h3><i class="fas fa-envelope"></i> Ubah Email</h3>
      </div>
      <div class="card-body">
        <form class="form-grid" id="form-email">
          <div class="field full">
            <label>Email Saat Ini</label>
            <input type="email" placeholder="admin@contoh.com" />
          </div>
          <div class="field">
            <label>Email Baru</label>
            <input type="email" placeholder="email baru" />
          </div>
          <div class="field">
            <label>Ulangi Email Baru</label>
            <input type="email" placeholder="ulangi email baru" />
          </div>
          <div class="actions">
            <button type="reset" class="btn"><i class="fas fa-undo"></i> Reset</button>
            <button type="submit" class="btn primary"><i class="fas fa-save"></i> Simpan</button>
          </div>
        </form>
      </div>
    </div>

    <div class="card">
      <div class="card-header">
        <h3><i class="fas fa-key"></i> Ubah Kata Sandi</h3>
      </div>
      <div class="card-body">
        <form class="form-grid" id="form-password">
          <div class="field full">
            <label>Kata Sandi Saat Ini</label>
            <input type="password" placeholder="••••••••" />
          </div>
          <div class="field">
            <label>Kata Sandi Baru</label>
            <input type="password" placeholder="Minimal 8 karakter" />
          </div>
          <div class="field">
            <label>Ulangi Kata Sandi Baru</label>
            <input type="password" placeholder="Ulangi kata sandi" />
          </div>
          <div class="actions">
            <button class="btn primary" type="submit"><i class="fas fa-key"></i> Ubah Kata Sandi</button>
          </div>
        </form>
      </div>
    </div>
  </section>

  <style>
    :root { --gap: 16px; }
    .header-card { background:#fff; border:1px solid #e5e7eb; border-radius:16px; padding:14px 16px; box-shadow:0 8px 24px rgba(2,6,23,0.06); margin-bottom:16px; container-type:inline-size; }
    .header-left { display:flex; align-items:center; gap:12px; }
    .header-left h1 { margin:0; font-size:1.4rem; font-weight:800; }
    .header-left p { margin:2px 0 0; color:#64748b; font-weight:600; }
    .icon { width:44px; height:44px; display:grid; place-items:center; border-radius:12px; background:#eef2ff; color:#4f46e5; border:1px solid #e5e7eb; }

    .settings-grid { display:grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: var(--gap); }
    @media (max-width: 980px){ .settings-grid { grid-template-columns: 1fr; } }

    .card { background:#fff; border:1px solid #e5e7eb; border-radius:16px; box-shadow:0 8px 24px rgba(2,6,23,0.06); overflow:hidden; container-type:inline-size; }
    .card-header { padding:14px 16px; border-bottom:1px solid #e5e7eb; background: #f8fafc; }
    .card-header h3 { margin:0; display:flex; align-items:center; gap:10px; font-size:1rem; font-weight:800; }
    .card-body { padding:14px 16px; display:grid; gap:12px; }

    .form-grid { display:grid; grid-template-columns: 1fr 1fr; gap:12px; align-items:start; }
    .form-grid .full { grid-column: 1 / -1; }
    .field { display:flex; flex-direction:column; gap:6px; }
    label { font-weight:800; color:#0f172a; }
    input[type="text"], input[type="password"], input[type="email"], select, textarea { border:1px solid #e5e7eb; border-radius:10px; padding:10px 12px; background:#f8fafc; color:#0f172a; font-weight:600; outline:none; }
    input:focus-visible, select:focus-visible, textarea:focus-visible { box-shadow:0 0 0 3px rgba(99,102,241,.25); border-color:#a5b4fc; }

    .divider { height:1px; background:#e5e7eb; margin:4px 0; }
    .toggle input { margin-right:8px; }

    .actions { display:flex; gap:10px; justify-content:flex-end; margin-top:4px; flex-wrap:wrap; }
    .btn { display:inline-flex; align-items:center; gap:8px; min-height:36px; padding:10px 14px; border-radius:10px; border:1px solid #e5e7eb; background:#f3f4f6; color:#111827; font-weight:800; }
    .btn.primary { background:#4f46e5; color:#fff; border-color:#4338ca; }
    .btn.secondary { background:#eef2ff; color:#3730a3; border-color:#c7d2fe; }

    .empty { display:grid; place-items:center; gap:8px; padding:18px; border:1px dashed #e5e7eb; border-radius:12px; color:#64748b; font-weight:700; background:#f8fafc; }

    /* Viewport breakpoints */
    @media (max-width: 820px){
      .form-grid { grid-template-columns: 1fr; }
      .actions { justify-content:flex-start; }
    }
    @media (max-width: 640px){
      .header-left h1 { font-size:1.2rem; }
      .header-left p { font-size:.95rem; }
      .icon { width:40px; height:40px; }
      input[type="text"], input[type="password"], input[type="email"], select, textarea { padding:9px 12px; }
      .btn { min-height:34px; padding:8px 12px; }
    }

    /* Container queries: adapt when the card itself gets narrow (embedded panes, split view) */
    @container (max-width: 560px){
      .card-header { padding:12px; }
      .card-header h3 { font-size:.95rem; }
      .card-body { padding:12px; gap:10px; }
      .form-grid { grid-template-columns: 1fr; gap:10px; }
      .actions { justify-content:flex-start; gap:8px; }
      .actions .btn { width:100%; justify-content:center; }
    }

    /* Header container: stack icon/title neatly on very small widths */
    @container (max-width: 420px){
      .header-left { gap:10px; }
      .header-left h1 { font-size:1.05rem; }
      .header-left p { font-size:.9rem; }
    }
  </style>

  <script>
    // plain JS only; hook up basic demo handlers (no backend wiring yet)
    document.addEventListener('DOMContentLoaded', function(){
      const emailForm = document.getElementById('form-email');
      const passForm = document.getElementById('form-password');
      if (emailForm) emailForm.addEventListener('submit', function(e){ e.preventDefault(); /* Email form submitted */ });
      if (passForm) passForm.addEventListener('submit', function(e){ e.preventDefault(); /* Password form submitted */ });
    });
  </script>
</Layout>
